<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>前端规范 | 秋天的枫叶</title><link rel="stylesheet" type="text/css" href="//fonts.css.network/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">前端规范</h1><a id="logo" href="/.">秋天的枫叶</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="搜索..."></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">前端规范</h1><div class="post-meta"><span class="date">May 22, 2018</span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i> Hits</i></i></span><a href="/2018/05/22/前端规范/#comments" class="comment-count"><a id="uyan_count_unit" href="/2018/05/22/前端规范/"></a><i class="cloud-tie-join-count"><i class="join-count">0</i></i> 留言</a></div><div class="post-content"><p>为了使代码更加简明、易读，团队中的每个人都应该遵循写好的前端规范，这样，即使把代码交给另一个人，他也可以很快的进入状态。</p>
<h1 id="规范目的"><a href="#规范目的" class="headerlink" title="规范目的"></a>规范目的</h1><ul>
<li>提高团队协作效率</li>
<li>便于前端开发以及后期优化维护</li>
<li>方便新进的成员快速上手</li>
<li>输出高质量的代码</li>
</ul>
<p>本规范文档一经确认, 前端开发人员必须按本文档规范进行前台页面开发。本文档如有不对或者不合适的地方请及时提出，经讨论决定后可以更新此文档。</p>
<h1 id="命名规则"><a href="#命名规则" class="headerlink" title="命名规则"></a>命名规则</h1><h4 id="项目命名"><a href="#项目命名" class="headerlink" title="项目命名"></a>项目命名</h4><p>全部采用小写方式，以下划线分隔。<br>例如：my_project</p>
<h4 id="目录命名"><a href="#目录命名" class="headerlink" title="目录命名"></a>目录命名</h4><p>目录命名可以参照项目命名，全部采用小写方式，有复数结构时，要采用复数命名的方法。<br>例如：scripts，images，styles<br>常用的目录有：</p>
<blockquote>
<p>styles  ——  样式表<br>scripts ——  js表<br>imgs    ——  图片目录<br>libs    ——  引入插件存放目录<br>videos  ——  视频目录</p>
</blockquote>
<h4 id="其他文件命名"><a href="#其他文件命名" class="headerlink" title="其他文件命名"></a>其他文件命名</h4><p>目录命名可以参照项目命名，全部采用小写方式。<br>例如：index.js，product_detail.js，product_detail.css，product_detail.html。</p>
<h1 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h1><p>1.统一缩进使用soft tab（4个空格）；<br>2.嵌套的节点应该缩进；<br>3.在属性上，使用双引号，不要使用单引号；<br>4.属性名全小写，用中划线做分隔符；<br>5.不要在自动闭合标签结尾处使用斜线（HTML5 规范 指出他们是可选的）；<br>6.不要忽略可选的关闭标签，例： 和 ；<br>7.HTML5 doctype:在页面开头使用这个简单地doctype来启用标准模式，使其在每个浏览器中尽可能一致的展现；<br>虽然doctype不区分大小写，但是按照惯例，doctype大写 （关于html属性，大写还是小写）。<br>8.字符编码:通过声明一个明确的字符编码，让浏览器轻松、快速的确定适合网页内容的渲染方式，通常指定为’UTF-8’;<br>9.lang属性:应在html标签上加上lang属性。这会给语音工具和翻译工具帮助，告诉它们应当怎么去发音和翻译;<br>10.IE兼容模式:用 <meta> 标签可以指定页面应该用什么版本的IE来渲染；<br>11.引入CSS, JS:根据HTML5规范, 通常在引入CSS和JS时不需要指明 type，因为 text/css 和 text/javascript 分别是他们的默认值。<br>HTML5 规范链接:</p>
<ul>
<li>使用link</li>
<li>使用style</li>
<li>使用script<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html lang=<span class="string">"en-us"</span>&gt;</div><div class="line">    &lt;head&gt;</div><div class="line">        &lt;title&gt;Page title&lt;/title&gt;</div><div class="line">        &lt;meta charset=<span class="string">"UTF-8"</span>&gt;</div><div class="line">        &lt;meta http-equiv=<span class="string">"X-UA-Compatible"</span> content=<span class="string">"IE=Edge"</span>&gt;</div><div class="line">        &lt;!-- External CSS --&gt;</div><div class="line">        &lt;link rel=<span class="string">"stylesheet"</span> href=<span class="string">"code_guide.css"</span>&gt;</div><div class="line">        &lt;!-- In-document CSS --&gt;</div><div class="line">        &lt;style&gt;</div><div class="line">            ...</div><div class="line">        &lt;/style&gt;</div><div class="line">    &lt;/head&gt;</div><div class="line">    &lt;body&gt;</div><div class="line">        &lt;img src=<span class="string">"images/company_logo.png"</span> alt=<span class="string">"Company"</span>&gt;</div><div class="line">        &lt;h1 class=<span class="string">"hello-world"</span>&gt;Hello, world!&lt;/h1&gt;</div><div class="line">        &lt;!-- External JS --&gt;</div><div class="line">        &lt;script src=<span class="string">"code_guide.js"</span>&gt;&lt;/script&gt;</div><div class="line">        &lt;!-- In-document JS --&gt;</div><div class="line">        &lt;script&gt;</div><div class="line">            ...</div><div class="line">        &lt;/script&gt;</div><div class="line">    &lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h1><h4 id="文件规范"><a href="#文件规范" class="headerlink" title="文件规范"></a>文件规范</h4><p>1.文件均归档至约定的目录中。例如：</p>
<blockquote>
<p>重置样式：reset.css<br>主要的 master.css<br>模块 module.css<br>基本共用 base.css/commen.css<br>布局、版面 layout.css<br>主题 themes.css<br>专栏 columns.css<br>文字 font.css<br>表单 forms.css<br>补丁 mend.css<br>打印 print.css</p>
</blockquote>
<p>2.文件引入可通过外联或内联方式引入。<br>    外联方式：（类型声明type=”text/css”可以省略）<br>    内联方式：（类型声明type=”text/css”可以省略）<br>    link和style标签都应该放入head中，原则上，不允许在html上直接写样式。避免在CSS中使用@import，嵌套不要超过一层。</p>
<p>3.文件名、文件编码及文件大小.<br>文件名必须由小写字母、数字、中划线组成;<br>文件必须用UTF-8编码，使用UTF-8（非BOM），在HTML中指定UTF-8编码，在CSS中则不需要特别指定因为默认就是UTF-8;<br>单个CSS文件避免过大（建议少于300行）。</p>
<h4 id="书写规范"><a href="#书写规范" class="headerlink" title="书写规范"></a>书写规范</h4><p>一、命名规则</p>
<ul>
<li>class 名称中只能出现小写字符和破折号（dashe）（不是下划线，也不是驼峰命名法）。破折号应当用于相关 class 的命名（类似于命名空间）（例如，.btn 和 .btn-danger）。</li>
<li>不能用“_”下划线来命名CSS选择器，为什么呢？<br>一些浏览器已经不允许使用下划线来命名CSS选择器（就是不兼容）；</li>
<li>避免过度任意的简写。.btn 代表 button，但是 .s 不能表达任何意思。</li>
<li>class 名称应当尽可能短，并且意义明确。</li>
<li>基于最近的父 class 或基本（base） class 作为新 class 的前缀。</li>
<li>使用 .js-* class 来标识行为（与样式相对），并且不要将这些 class 包含到 CSS 文件中。</li>
</ul>
<p>在为 Sass 和 Less 变量命名是也可以参考上面列出的各项规范。<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">/* Bad example */</div><div class="line">.t &#123; ... &#125;</div><div class="line">.red &#123; ... &#125;</div><div class="line">.header &#123; ... &#125;</div><div class="line">————</div><div class="line">/* Good example */</div><div class="line">.tweet &#123; ... &#125;</div><div class="line">.important &#123; ... &#125;</div><div class="line">.tweet-header &#123; ... &#125;</div></pre></td></tr></table></figure></p>
<p>二、书写顺序<br>1.位置属性(position, top, right, z-index, display, float等)<br>2.大小(width, height, padding, margin)<br>3.文字系列(font, line-height, letter-spacing, color- text-align等)<br>4.背景(background, border等)<br>5.其他(animation, transition等)<br>如果使用CSS3的属性，如果有必要加入浏览器前缀，则按照 -webkit- / -moz- / -ms- / -o- / std的顺序进行添加，标准属性写在最后。<br>链接的样式请严格按照如下顺序添加： a:link -&gt; a:visited -&gt; a:hover -&gt; a:active</p>
<blockquote>
<p>目的：减少浏览器reflow（回流），提升浏览器渲染dom的性能。<br>原理：浏览器的渲染流程为——<br>①解析html构建dom树，解析css构建css树：将html解析成树形的数据结构，将css解析成树形的数据结构<br>②构建render树：DOM树和CSS树合并之后形成的render树。<br>③布局render树：有了render树，浏览器已经知道那些网页中有哪些节点，各个节点的css定义和以及它们的从属关系，从而计算出每个节点在屏幕中的位置。<br>④绘制render树：按照计算出来的规则，通过显卡把内容画在屏幕上。<br>css样式解析到显示至浏览器屏幕上就发生在②③④步骤，可见浏览器并不是一获取到css样式就立马开始解析而是根据css样式的书写顺序将之按照dom树的结构分布render样式，完成第②步，然后开始遍历每个树结点的css样式进行解析，此时的css样式的遍历顺序完全是按照之前的书写顺序。在解析过程中，一旦浏览器发现某个元素的定位变化影响布局，则需要倒回去重新渲染正如按照这样的书写书序：<br>width: 100px;<br>height: 100px;<br>background-color: red ;<br>position: absolute;<br>当浏览器解析到position的时候突然发现该元素是绝对定位元素需要脱离文档流，而之前却是按照普通元素进行解析的，所以不得不重新渲染，解除该元素在文档中所占位置，然而由于该元素的占位发生变化，其他元素也可能会受到它回流的影响而重新排位。最终导致③步骤花费的时间太久而影响到④步骤的显示，影响了用户体验。<br>所以规范的的css书写顺序对于文档渲染来说一定是事半功倍的！</p>
</blockquote>
<p>三、书写规范<br>1、使用CSS缩写属性；<br>CSS有些属性是可以缩写的，比如padding,margin,font等等，这样精简代码同时又能提高用户的阅读体验。<br>2、去掉小数点前的“0”；<br>3、16进制颜色代码缩写；<br>有些颜色代码是可以缩写的，我们就尽量缩写吧，提高用户体验为主。</p>
<h4 id="代码性能优化"><a href="#代码性能优化" class="headerlink" title="代码性能优化"></a>代码性能优化</h4><p>1、合并margin、padding、border的-left/-top/-right/-bottom的设置，尽量使用短名称。<br>2、选择器应该在满足功能的基础上尽量简短，减少选择器嵌套，查询消耗。但是一定要避免覆盖全局样式设置。<br>3、注意选择器的性能，不要使用低性能的选择器。<br>4、禁止在css中使用*选择符。<br>5、除非必须，否则，一般有class或id的，不需要再写上元素对应的tag。<br>6、0后面不需要单位，比如0px可以省略成0，0.8px可以省略成.8px。<br>7、如果是16进制表示颜色，则颜色取值应该大写。<br>8、如果可以，颜色尽量用三位字符表示，例如#AABBCC写成#ABC 。<br>9、如果没有边框时，不要写成border:0，应该写成border:none 。<br>10、尽量避免使用AlphaImageLoader 。<br>11、在保持代码解耦的前提下，尽量合并重复的样式。<br>12、background、font等可以缩写的属性，尽量使用缩写形式 。</p>
<h4 id="字体规则"><a href="#字体规则" class="headerlink" title="字体规则"></a>字体规则</h4><p>1、为了防止文件合并及编码转换时造成问题，建议将样式中文字体名字改成对应的英文名字，如：黑体(SimHei) 宋体(SimSun) 微软雅黑 (Microsoft Yahei，几个单词中间有空格组成的必须加引号)<br>2、字体粗细采用具体数值，粗体bold写为700，正常normal写为400<br>3、font-size必须以px或pt为单位，推荐用px（注：pt为打印版字体大小设置），不允许使用xx-small/x-small/small/medium/large/x-large/xx-large等值<br>4、为了对font-family取值进行统一，更好的支持各个操作系统上各个浏览器的兼容性，font-family不允许在业务代码中随意设置</p>
<h4 id="其他规范"><a href="#其他规范" class="headerlink" title="其他规范"></a>其他规范</h4><p>1、不要轻易改动全站级CSS和通用CSS库。改动后，要经过全面测试。<br>2、避免使用filter<br>3、避免在CSS中使用expression<br>4、避免过小的背景图片平铺。<br>5、尽量不要在CSS中使用!important<br>6、绝对不要在CSS中使用”*”选择符<br>7、层级(z-index)必须清晰明确，页面弹窗、气泡为最高级（最高级为999），不同弹窗气泡之间可在三位数之间调整；普通区块为10-90内10的倍数；区块展开、弹出为当前父层级上个位增加，禁止层级间盲目攀比。<br>8、背景图片请尽可能使用sprite技术, 减小http请求, 考虑到多人协作开发, sprite按照模块、业务、页面来划分均可。</p>
<h4 id="CSS3属性支持度"><a href="#CSS3属性支持度" class="headerlink" title="CSS3属性支持度"></a>CSS3属性支持度</h4><p><img src="/2018/05/22/前端规范/79341366257790.png" alt="css"></p>
<h4 id="常用的CSS命名规则"><a href="#常用的CSS命名规则" class="headerlink" title="常用的CSS命名规则"></a>常用的CSS命名规则</h4><blockquote>
<p>头：header<br>内容：content/container<br>尾：footer<br>导航：nav<br>侧栏：sidebar<br>栏目：column<br>页面外围控制整体佈局宽度：wrapper<br>左右中：left right center<br>登录条：loginbar<br>标志：logo<br>广告：banner<br>页面主体：main<br>热点：hot<br>新闻：news<br>下载：download<br>子导航：subnav<br>菜单：menu<br>子菜单：submenu<br>搜索：search<br>友情链接：friendlink<br>页脚：footer<br>版权：copyright<br>滚动：scroll<br>内容：content<br>标签：tags<br>文章列表：list<br>提示信息：msg<br>小技巧：tips<br>栏目标题：title<br>加入：joinus<br>指南：guild<br>服务：service<br>注册：regsiter<br>状态：status<br>投票：vote<br>合作伙伴：partner</p>
</blockquote>
<h1 id="JS"><a href="#JS" class="headerlink" title="JS"></a>JS</h1><p>1，统一采用闭包的立即执行的方式，不要污染全局变量；<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">（<span class="function"><span class="title">funcction</span></span>()&#123;        </div><div class="line">//  to <span class="keyword">do</span> ...    </div><div class="line">&#125;）(window)</div></pre></td></tr></table></figure></p>
<p>2，不要污染全局变量，尽量采用局部变量的；<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">;（<span class="function"><span class="title">function</span></span>()&#123;    </div><div class="line">    不规范的书写方式：        </div><div class="line">    var name = <span class="string">'andy'</span>;        </div><div class="line">    var age = <span class="string">'lcuy'</span>;        </div><div class="line">    ....        </div><div class="line">    <span class="keyword">function</span> createNums(params) &#123;           </div><div class="line">        var sex = <span class="string">'boy'</span>;           </div><div class="line">        var city = <span class="string">'BeiJing'</span>;            </div><div class="line">        ...        </div><div class="line">    &#125;    </div><div class="line">    规范的书写方式：        </div><div class="line">    统一的类型可以new 一个公共函数        </div><div class="line">    <span class="keyword">function</span> <span class="function"><span class="title">createPeople</span></span>()&#123;            </div><div class="line">        var name = <span class="string">'andy'</span>,                </div><div class="line">        age = <span class="string">'lcuy'</span>,                </div><div class="line">        sex = <span class="string">'boy'</span>,                </div><div class="line">        city = <span class="string">'BeiJing'</span>;        </div><div class="line">    &#125;    </div><div class="line">&#125;）(window)；</div></pre></td></tr></table></figure></p>
<p>3，为了区分全局变量和局部变量，书写方式如下：<br>全局变量采用 $ 符：如 var $name = ‘andy’;<br>局部变量采用 _ 符：如 var _age = ‘30’;<br>4，不要想当然的创建过多的函数，统一放到一个位置，或在原型里添加：    若是构造函数，首字母要大写<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">var Union_config = <span class="function"><span class="title">function</span></span>()&#123;        </div><div class="line">    create:<span class="function"><span class="title">function</span></span>()&#123;            </div><div class="line">        var Union_config = <span class="function"><span class="title">function</span></span>()&#123;             </div><div class="line">            init:<span class="function"><span class="title">function</span></span>()&#123;   </div><div class="line">            //  初始化函数                    </div><div class="line">            ....                </div><div class="line">            &#125;,                </div><div class="line">            sumbit:<span class="function"><span class="title">function</span></span>()&#123;  </div><div class="line">            //  提交表单信息                    </div><div class="line">            ...                </div><div class="line">            &#125;,                </div><div class="line">            ...                </div><div class="line">            ...            </div><div class="line">        &#125;;            </div><div class="line"></div><div class="line">    <span class="built_in">return</span> Union_config;        </div><div class="line">    &#125;    </div><div class="line">&#125;;  </div><div class="line">var myUnion = Union_config.create();  </div><div class="line">//  调用函数    </div><div class="line">以下可以按需调用函数方法；</div><div class="line">myUnion.sumbit();      </div><div class="line">...</div></pre></td></tr></table></figure></p>
<p>5，注释！！！－－－为了方便其它同事，自己写代码的时候一定要写注释； 若是定义的全局注释或者函数等注释采用标准等文档注释；<br>如：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">/**@zJquery    通用js库     </div><div class="line">*  @author     huangzhao     </div><div class="line">*  *  ....    </div><div class="line">*  */</div></pre></td></tr></table></figure></p>
<p>6，链式调用以及其它用法<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">如：  $(<span class="string">'.div1'</span>).html(<span class="string">''</span>);  $(<span class="string">'.div2'</span>).html(<span class="string">''</span>);  </div><div class="line">可以写成： $(<span class="string">'.div1,.div2'</span>).html(<span class="string">''</span>);  </div><div class="line">如：  $(<span class="string">'.div1'</span>).css(<span class="string">'color'</span>,<span class="string">'red'</span>);  </div><div class="line">$(<span class="string">'.div1'</span>).addClass(<span class="string">'active'</span>);  </div><div class="line">可以写成： $(<span class="string">'.div1'</span>).css(<span class="string">'color'</span>,<span class="string">'red'</span>).addClass(<span class="string">'active'</span>);</div></pre></td></tr></table></figure></p>
<p>7，函数命名统一采用驼峰命名法，如：createNums()；<br>8，规范定义JSON对象，补全双引号 对于JSON数据，我们推荐采用标准地书写格式，方便查看；<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">如：&#123;name:<span class="string">'andy'</span>,age:<span class="string">'18'</span>&#125;  改成  &#123;<span class="string">"name"</span>:<span class="string">"andy"</span>,<span class="string">"age"</span>:<span class="string">"17"</span>&#125;</div></pre></td></tr></table></figure></p>
<p>10，用“＝＝＝“取代“＝＝“<br>前者是严格判断，后者会进行隐式的类型转换；<br>11，关于for循环性能体验<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">var myarr = [<span class="string">" "</span> <span class="string">" "</span> <span class="string">" ];</span></div><div class="line">for(var i=0;i&lt;myarr.length;i++)&#123;</div><div class="line">//此写法性能一般；</div><div class="line">&#125;</div><div class="line">for(var i=0,len=myarr.length;i&lt;len;i++)&#123;</div><div class="line">//此写法性能良好</div><div class="line">&#125;</div><div class="line">for(var i=0,val;val = myarr[i++])&#123;</div><div class="line">    console.log(i,val);</div><div class="line">//此写法性能好－－－推荐使用</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>12，统一使用缩进大小，以tab为基准；<br>13，var 的时候若有常量，全用大写；如  var  KPI = 123;<br>14, js中避免过多的DOM操作，需创建文档片段；<br>数据较多的时候，会影响性能，如下：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span>(var i=0;i&lt;500;i++)</div><div class="line">&#123;</div><div class="line">    var _span = document.createElement(<span class="string">'span'</span>);</div><div class="line">    var _text = document.createTextNode(i);</div><div class="line">    _span.appendChild(_text);</div><div class="line">    document.body.appendChild(_span);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>通过创建文档片段来优化性能：如下：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">var <span class="variable">$frgment</span> = document.createDocumentFragment();</div><div class="line"><span class="keyword">for</span>(var i=0,len=500;i&lt;len;i++)&#123;</div><div class="line">    var _span = document.createElement(<span class="string">'span'</span>),</div><div class="line">        _text = document.createTextNode(i);</div><div class="line">        _span.appendChild(_text);</div><div class="line">        <span class="variable">$frgment</span>.appendChild(_span);//  先添加到文档片段中</div><div class="line">&#125;</div><div class="line">document.body.appendChild(<span class="variable">$frgment</span>);//  最后再绑定给要赋予的元素</div></pre></td></tr></table></figure></p>
<p>15, 如何处理onload事件要执行的多个函数？<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">function</span> <span class="function"><span class="title">createNumA</span></span>()&#123;</div><div class="line">    console.log(1);</div><div class="line">&#125;</div><div class="line"><span class="keyword">function</span> <span class="function"><span class="title">createNumB</span></span>()&#123;</div><div class="line">    console.log(2);</div><div class="line">&#125;</div><div class="line">window.onload = createNumA;//这个不会执行，被下面的覆盖了；</div><div class="line">window.onload = createNumB;//当然，这个可以执行，覆盖了上面的onload事件</div></pre></td></tr></table></figure></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">//  解决方法1：可以用隐式函数----此方法比较常见，便于理解</div><div class="line">window.onload = <span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">    //都会被执行</div><div class="line">    createNumA();</div><div class="line">    createNumB();</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">//  解决方法2:</div><div class="line"><span class="keyword">function</span> addEventOnload(func)&#123;</div><div class="line">    var oldOnload = window.onload;</div><div class="line">    <span class="keyword">if</span>(typeof window.onload != <span class="string">'function'</span>)&#123;</div><div class="line">        window.onload = func;</div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line">        window.onload = <span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">            oldOnload();</div><div class="line">            func();</div><div class="line">        &#125;;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">//  调用方法</div><div class="line">addEventOnload(createNumA);</div><div class="line">addEventOnload(createNumB);</div></pre></td></tr></table></figure>
<p>16，js代码要做到高内聚/低耦合！<br>高内聚：就是指某个系统模块有一段相关行很强的代码组成，只负责一项任务开发，俗称“单一责任原则”；</p>
<p>低耦合：一段完整的js代码，模块与模块之间尽可能独立存在，原因是可能每个模块处理的js代码功能不同。模块与模块之间的接口尽量也少而简单。如果某个模块比较大，尽量拆分来做，便于修改以及调用；</p>
<p>例如：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">//  阶乘函数</div><div class="line"><span class="keyword">function</span> factorial(num)&#123;</div><div class="line">    <span class="keyword">if</span>(num &lt;= 1 )&#123;</div><div class="line">        <span class="built_in">return</span> 1;</div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line">        <span class="built_in">return</span> num * factorial(num-1);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">factorial(3);</div><div class="line">console.log(factorial(3));//    6=1*2*3</div><div class="line">//  上面的函数，这样定义没有问题，但问题是这个函数的执行与函数名factorail紧紧耦合在了一起。</div><div class="line">//  为了消除这种紧密耦合的现象，用arguments.callee来解决</div><div class="line"><span class="keyword">function</span> factorial(num)&#123;</div><div class="line">    <span class="keyword">if</span>(num &lt;= 1)&#123;</div><div class="line">        <span class="built_in">return</span> 1;</div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line">        <span class="built_in">return</span> num * arguments.callee(num-1);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">/*  注意：在函数内部，有两个特殊的对象，arguments和this</div><div class="line">    虽然，arguments的主要用途是保存函数参数，但这个对象有个名叫callee的属性，</div><div class="line">    该属性是一个指针，指向拥有arguments对象的函数</div><div class="line">*/</div></pre></td></tr></table></figure></p>
<p>17， 定义多个函数的时候，如果参数相同，可以用apply()和call()改变环境对象，得到引用<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">每个函数都包括非继承而来的方法，apply()和call();</div><div class="line">   apply()和call()方法相同，区别在于接受的参数不同而已；</div><div class="line">  <span class="keyword">function</span> sum(num1,num2)&#123;</div><div class="line">      <span class="built_in">return</span> num1 + num2;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">function</span> callSum(num1,num2)&#123;</div><div class="line">      <span class="built_in">return</span> sum.apply(this,arguments);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">function</span> callSum1(num1,num2)&#123;</div><div class="line">      <span class="built_in">return</span> sum.apply(this,[num1,num2]);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">function</span> callSum2(num1,num2)&#123;</div><div class="line">      <span class="built_in">return</span> sum.call(this,num1,num2);</div><div class="line">  &#125;</div><div class="line">  console.log(callSum(10,10));    //10</div><div class="line">  console.log(callSum1(10,10));   //10</div><div class="line">  console.log(callSum2(10,10));   //10</div><div class="line">  //  但是，传递参数并不是apply()和call()的真正用武之地，他们真正的强大的地方是能够扩充函数赖以运行的作用域</div><div class="line">  window.color = <span class="string">'red'</span>;</div><div class="line">  var <span class="variable">$o</span> = &#123;<span class="string">"color"</span>:<span class="string">"blue"</span>&#125;;</div><div class="line">  <span class="keyword">function</span> <span class="function"><span class="title">sayColor</span></span>()&#123;</div><div class="line">      console.log(this.color);</div><div class="line">  &#125;</div><div class="line">  sayColor();//red</div><div class="line">  sayColor.call(this);//red</div><div class="line">  sayColor.call(window);//red</div><div class="line">  sayColor.call(<span class="variable">$o</span>);//blue</div></pre></td></tr></table></figure></p>
<p>18，不要使用eval()函数<br>原因：1），性能差；2），不能打断点调试；3），容易受到攻击；4），可读性差；5），优化概率低；<br>19，减少花费在作用域链上的时间，增加脚本的整体性能<br>优化之前：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">function</span> <span class="function"><span class="title">createUi</span></span>()&#123;</div><div class="line">    var _span = document.getElementsByTagName(<span class="string">'span'</span>);</div><div class="line">    console.log(_span.length);</div><div class="line">    <span class="keyword">for</span>(var i = 0,len = _span.length;i&lt;len;i++)&#123;</div><div class="line">        _span[i].title = document.title + <span class="string">'txt'</span> + i;</div><div class="line">        console.log(i);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">createUi();</div></pre></td></tr></table></figure></p>
<p>createUi中包含了二个对于全局变量document对象的引用，特别是循环中的document引用，查到次数是O(n)，每次都要进行作用域链查找。通过创建一个指向document的局部变量，就可以通过限制一次全局查找来改进这个函数的性能。</p>
<p>优化之后：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">function</span> <span class="function"><span class="title">createUi</span></span>()&#123;</div><div class="line">    var _doc = document,</div><div class="line">        _span = _doc.getElementsByTagName(<span class="string">'span'</span>);</div><div class="line">    <span class="keyword">for</span>(var i = 0,len=_span.length;i&lt;len;i++)&#123;</div><div class="line">        _span[i].title = _doc.title + <span class="string">'txt'</span> + i;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>20，避免with()语句</p>
<p>缺点：1），运行缓慢；2），会创建自己的作用域，因为会增加代码块中执行的作用域的长度；3），难以优化；</p>
<p>21， 提倡对象字面量<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">//  避免</div><div class="line">var <span class="variable">$a</span> = new Array();</div><div class="line"><span class="variable">$a</span>[0] = 1;</div><div class="line"><span class="variable">$a</span>[1] = <span class="string">'andy'</span>;</div><div class="line"><span class="variable">$a</span>[2] = <span class="string">'false'</span>;</div><div class="line">var <span class="variable">$obj</span> = new Object();</div><div class="line"><span class="variable">$obj</span>.name = <span class="string">'andy'</span>;</div><div class="line"><span class="variable">$obj</span>.age = 20;</div><div class="line">//  提倡</div><div class="line">var <span class="variable">$a</span> = [1,<span class="string">'andy'</span>,<span class="string">'false'</span>];</div><div class="line">var <span class="variable">$b</span> = &#123;</div><div class="line">    name:<span class="string">'andy'</span>,</div><div class="line">    andy:20</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>22，建议多使用innerHtml</p>
<p>页面上创建DOM节点的方法有两种：</p>
<p>使用诸如createElement()和appendChild()之类的DOM方法，以及使用innerHTML。</p>
<p>对于小的DOM更改，两者效率差不多，但对于大的DOM更改，innerHTML要比标准的DOM方法创建同样的DOM结构快得多。</p>
<p>当使用innerHTML设置为某个值时，后台会创建一个HTML解释器，然后使用内部的DOM调用来创建DOM结构，而非基于JS的DOM调用。由于内部方法是编译好的而非解释执行，故执行的更快。</p>
<p>23，通过模板元素clone，替代createElemnet</p>
<p>如果文档中存在现成的样板节点，应该是用cloneNode()方法，因为使用createElement()方法之后，<br>你需要设置多次元素的属性，使用cloneNode()则可以减少属性的设置次数——同样如果需要创建很多元素，==应该先准备一个样板节点==</p>
<p>优化之前：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">var <span class="variable">$frag</span> = document.createDocumentFragment();</div><div class="line"><span class="keyword">for</span> (var i = 0; i &lt; 10; i++) &#123;</div><div class="line">    var _el = document.createElement(<span class="string">'p'</span>);</div><div class="line">    _el.innerHTML = i;</div><div class="line">    <span class="variable">$frag</span>.appendChild(_el);</div><div class="line">&#125;</div><div class="line">document.body.appendChild(<span class="variable">$frag</span>);</div></pre></td></tr></table></figure></p>
<p>优化之后：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">var <span class="variable">$frag</span> = document.createDocumentFragment();</div><div class="line">var <span class="variable">$pEl</span> = document.getElementsByTagName(<span class="string">'p'</span>)[0];</div><div class="line"><span class="keyword">for</span> (var i = 0; i &lt; 10; i++) &#123;</div><div class="line">   var _el = <span class="variable">$pEl</span>.cloneNode(<span class="literal">false</span>);</div><div class="line">   _el.innerHTML = i;</div><div class="line">   <span class="variable">$frag</span>.appendChild(_el);</div><div class="line">&#125;</div><div class="line">document.body.appendChild(<span class="variable">$frag</span>);</div></pre></td></tr></table></figure></p>
<p>24，|| 和 &amp;&amp; 布尔运算符的应用<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">function</span> eventHandler(e) &#123;</div><div class="line">    <span class="keyword">if</span> (!e) e = window.event;</div><div class="line">&#125;</div><div class="line">//可以替换为：</div><div class="line"><span class="keyword">function</span> eventHandler(e) &#123;</div><div class="line">    e = e || window.event;</div><div class="line">&#125;</div><div class="line"><span class="keyword">if</span> (myobj) &#123;</div><div class="line">    <span class="keyword">do</span>Something(myobj);</div><div class="line">&#125;</div><div class="line">//可以替换为：</div><div class="line">myobj &amp;&amp; <span class="keyword">do</span>Something(myobj);</div></pre></td></tr></table></figure></p>
<p>25，一次性修改样式属性；<br>目的：防止页面过多重排<br>优化前:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ele.style.backgroundColor = <span class="string">"#e6e6e6"</span>;  </div><div class="line">ele.style.color = <span class="string">"#000"</span>;  </div><div class="line">ele.style.fontSize = <span class="string">"12rem"</span>;</div></pre></td></tr></table></figure></p>
<p>优化后：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">.addActive &#123;</div><div class="line">    background: <span class="comment">#eee;</span></div><div class="line">    color: <span class="comment">#093;</span></div><div class="line">    height: 200px;</div><div class="line">&#125;</div><div class="line">document.getElementById(‘myDiv’).className = ‘addActive’;</div></pre></td></tr></table></figure></p>
<p>26，操作DOM前，先把DOM节点删除或隐藏，因为隐藏的节点不会触发重排<br>优化前：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">var <span class="variable">$items</span> = document.getElementsByClassName(<span class="string">'mydiv'</span>);</div><div class="line"><span class="keyword">for</span> (var i=0; i &lt; <span class="variable">$items</span>.length; i++)&#123;  </div><div class="line">    var _item = document.createElement(<span class="string">"li"</span>);  </div><div class="line">    _item.appendChild(document.createTextNode(<span class="string">"Option "</span> + i);  </div><div class="line">    <span class="variable">$items</span>[i].appendChild(_item);  </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>优化后：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$items</span>.style.display = <span class="string">"none"</span>;  </div><div class="line"><span class="keyword">for</span> (var i=0; i &lt; items.length; i++)&#123;  </div><div class="line">    var _item = document.createElement(<span class="string">"li"</span>);  </div><div class="line">    _item.appendChild(document.createTextNode(<span class="string">"Option "</span> + i);  </div><div class="line">    <span class="variable">$items</span>[i].appendChild(_item);  </div><div class="line">&#125;  </div><div class="line"><span class="variable">$items</span>.style.display = <span class="string">""</span>;</div></pre></td></tr></table></figure></p>
<p>DOM的核心问题是：DOM修改导致的页面重绘、重新排版！重新排版是用户阻塞的操作，同时，如果频繁重排，CPU使用率也会猛涨！<br>27，用数组方式来遍历Dom对象集合；<br>html:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;ul id=<span class="string">"testList"</span> &gt;</div><div class="line">    &lt;li&gt;Item&lt;/li&gt;</div><div class="line">    &lt;li&gt;Item&lt;/li&gt;</div><div class="line">    &lt;li&gt;Item&lt;/li&gt;</div><div class="line">    &lt;li&gt;Item&lt;/li&gt;</div><div class="line">    &lt;li&gt;Item&lt;/li&gt;</div><div class="line">    &lt;li&gt;Item&lt;/li&gt;</div><div class="line">    &lt;li&gt;Item&lt;/li&gt;</div><div class="line">    &lt;li&gt;Item&lt;/li&gt;</div><div class="line">    &lt;li&gt;Item&lt;/li&gt;</div><div class="line">&lt;/ul&gt;</div></pre></td></tr></table></figure></p>
<p>js:<br>1)、each:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">var <span class="variable">$arr</span> = $(<span class="string">'li'</span>),</div><div class="line">    <span class="variable">$KPI</span> = 1000000;</div><div class="line">console.time(<span class="string">'Each需要花费的时间'</span>);</div><div class="line"><span class="keyword">for</span>(var i=0;i&lt;<span class="variable">$KPI</span>;i++)&#123;</div><div class="line">    <span class="variable">$arr</span>.each(<span class="keyword">function</span>(i,val)&#123;</div><div class="line">        this;</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line">console.timeEnd(<span class="string">'Each需要花费的时间'</span>);</div></pre></td></tr></table></figure></p>
<p>2），数组array实现<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">var <span class="variable">$arr</span> = $(<span class="string">'li'</span>),</div><div class="line">    <span class="variable">$KPI</span> = 1000000;</div><div class="line">//  array实现</div><div class="line">console.time(<span class="string">'Array需要花费的时间'</span>);</div><div class="line"><span class="keyword">for</span>(var i=0;i&lt;<span class="variable">$KPI</span>;i++)&#123;</div><div class="line">    var _len = <span class="variable">$arr</span>.length;</div><div class="line">    <span class="keyword">for</span>(var j=0;j&lt;_len;j++)&#123;</div><div class="line">        <span class="variable">$arr</span>[i];</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">console.timeEnd(<span class="string">'Array需要花费的时间'</span>);</div></pre></td></tr></table></figure></p>
<p>总结：经过测试，在性能方面，对于each方法这种优雅实现是有代价的。花费的时间长；然而通过数组来实现， Dom对象集合就是一个类数组，具有length和value属性。花费时间短；<br>28，不要在函数体内做过多的嵌套判断；<br>优化前：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">function</span> <span class="function"><span class="title">createNums</span></span>()&#123;</div><div class="line">    var _r = &#123;&#125;;</div><div class="line">    _r.data = &#123;&#125;;</div><div class="line">    _r.data.age = 20;</div><div class="line">    <span class="keyword">if</span>(_r)&#123;</div><div class="line">        <span class="keyword">if</span>(_r.data)&#123;</div><div class="line">            <span class="keyword">if</span>(_r.data.age)&#123;</div><div class="line">                console.log(<span class="string">'true'</span>);</div><div class="line">            &#125;<span class="keyword">else</span>&#123;</div><div class="line">                console.log(<span class="string">'false'</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">createNums();</div></pre></td></tr></table></figure></p>
<p>优化后：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">function</span> <span class="function"><span class="title">createNums1</span></span>()&#123;</div><div class="line">    var _r = &#123;&#125;;</div><div class="line">    _r.data = &#123;&#125;;</div><div class="line">    _r.data.age = 20;</div><div class="line">    <span class="keyword">if</span>(!_r)&#123;</div><div class="line">        <span class="built_in">return</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(!_r.data)&#123;</div><div class="line">        <span class="built_in">return</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(_r.data.age)&#123;</div><div class="line">        console.log(<span class="string">'true'</span>);</div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line">        console.log(<span class="string">'false'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">createNums1();</div></pre></td></tr></table></figure></p>
<p>29，适当用while代替for循环，可以提高性能；如数组元素与排序无关的情况<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var <span class="variable">$date</span> = new Date();</div><div class="line">var <span class="variable">$arrs</span> = [1,1,2,3,4,5,6,7,8,9,10,11,11,22,33,44,555,55555555555555,555,55,55,32,32,8,8,8,8,1324123414],</div><div class="line">    <span class="variable">$sum</span> = 0,</div><div class="line">    <span class="variable">$len</span> = <span class="variable">$arrs</span>.length;</div></pre></td></tr></table></figure></p>
<p>优化前：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span>(var i=0;i&lt;<span class="variable">$len</span>;i++)&#123;</div><div class="line">    <span class="variable">$sum</span> += <span class="variable">$arrs</span>[i];</div><div class="line">&#125;</div><div class="line">console.log(<span class="variable">$sum</span>);</div><div class="line">console.log(new Date() - <span class="variable">$date</span>);</div></pre></td></tr></table></figure></p>
<p>优化后：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">while</span>(<span class="variable">$len</span> --)&#123;</div><div class="line">    <span class="variable">$sum</span> += <span class="variable">$arrs</span>[<span class="variable">$len</span>];</div><div class="line">&#125;</div><div class="line">console.log(<span class="variable">$sum</span>);</div><div class="line">console.log(new Date() - <span class="variable">$date</span>);</div></pre></td></tr></table></figure></p>
<p>提示：数据小的情况下可能差别不大，如果数据量比较大，第二种写法效果就比较明显了；大家可根据情况应用，一般情况下要知道，能用for循环的就不要用for..in循环（因为for.in循环会自动在后台创建一个枚举器，比较损坏性能），此外，能用while循环的尽量不要用for循环；最后也推荐大家用下do..while循环（前三种是前测试循环，最后一个是后测试循环）；<br>30，关于闭包的问题解决方法：<br>html:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;span&gt;1&lt;/span&gt;</div><div class="line">&lt;span&gt;2&lt;/span&gt;</div><div class="line">&lt;span&gt;3&lt;/span&gt;</div></pre></td></tr></table></figure></p>
<p>js:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">var _doc = document,</div><div class="line">    _span = _doc.getElementsByTagName(<span class="string">'span'</span>);</div><div class="line"><span class="keyword">for</span>(var i = 0,len=_span.length;i&lt;len;i++)&#123;</div><div class="line">        _span[i].onclick = <span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">            console.log(i);</div><div class="line">        &#125;</div><div class="line">&#125;</div><div class="line">//提示；我们会发现打印出来的都是 3；这就是所谓的闭包</div></pre></td></tr></table></figure></p>
<p>1），闭包的问题用闭包的方法去解决<br>解决思路：<br>增加若干个对应的闭包空间（这里是匿名函数），专门用来存储原来需要引用的下标；<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">var _doc = document,</div><div class="line">    _span = _doc.getElementsByTagName(<span class="string">'span'</span>);</div><div class="line"><span class="keyword">for</span>(var i = 0,len=_span.length;i&lt;len;i++)&#123;</div><div class="line">    (<span class="keyword">function</span>(arg)&#123; //</div><div class="line">        _span[i].onclick = <span class="function"><span class="title">function</span></span>()&#123;  //onclick函数实例的<span class="keyword">function</span> scope的closole 对象属性有一个引用arg，只要外部空间的arg不变，这里的引用值也不会改变</div><div class="line">            console.log(arg);</div><div class="line">        &#125;</div><div class="line">    &#125;)(i);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>2)，将下标作为对象属性（name:’i’,value:’i’的值）添加到每个数组项中；<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">var _doc = document,</div><div class="line">    _span = _doc.getElementsByTagName(<span class="string">'span'</span>);</div><div class="line"><span class="keyword">for</span>(var i = 0,len=_span.length;i&lt;len;i++)&#123;</div><div class="line">        _span[i].i =i;  //为当前数组项目即当前span对象添加一个名为i的属性，值为循环体的i变量的值；</div><div class="line">        _span[i].onclick = <span class="function"><span class="title">function</span></span>()&#123;//此时当前span的对象的i属性并不是循环体i变量的引用，而是一个独立span对象的属性，属性值在声明的时候就确定了；</div><div class="line">            console.log(this.i);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>3)，闭包方法的延伸<br>//  此方法和方法1类似但又有不同；<br>//  相同点：都是增加若干个对应的闭包空间来存储下标；<br>//  不同点：方法1是在新增的匿名闭包空间完成事件的绑定；方法3是将事件绑定在新增的匿名函数返回的函数上；<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">var _doc = document,</div><div class="line">    _span = _doc.getElementsByTagName(<span class="string">'span'</span>);</div><div class="line"><span class="keyword">for</span>(var i = 0,len=_span.length;i&lt;len;i++)&#123;</div><div class="line">        _span[i].onclick = (<span class="keyword">function</span>(arg)&#123;</div><div class="line">            <span class="built_in">return</span> <span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">                console.log(arg);</div><div class="line">            &#125;</div><div class="line">        &#125;)(i);</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>总结：以上3中方法都可以，看个人喜好！ </p>
</div><div class="tags"></div><div class="post-share"><div class="bdsharebuttonbox"><span style="float:left;line-height: 28px;height: 28px;font-size:16px;font-weight:blod">分享到：</span><a href="#" data-cmd="more" class="bds_more"></a><a href="#" data-cmd="mshare" title="分享到一键分享" class="bds_mshare"></a><a href="#" data-cmd="fbook" title="分享到Facebook" class="bds_fbook"></a><a href="#" data-cmd="twi" title="分享到Twitter" class="bds_twi"></a><a href="#" data-cmd="linkedin" title="分享到linkedin" class="bds_linkedin"></a><a href="#" data-cmd="youdao" title="分享到有道云笔记" class="bds_youdao"></a><a href="#" data-cmd="evernotecn" title="分享到印象笔记" class="bds_evernotecn"></a><a href="#" data-cmd="weixin" title="分享到微信" class="bds_weixin"></a><a href="#" data-cmd="qzone" title="分享到QQ空间" class="bds_qzone"></a><a href="#" data-cmd="tsina" title="分享到新浪微博" class="bds_tsina"></a></div></div><div class="post-nav"><a href="/2018/08/02/本地打印问题/" class="pre">本地打印问题</a><a href="/2018/05/04/如何展示github中的demo/" class="next">如何展示github中的demo</a></div><div id="comments"><div id="uyan_frame"></div><div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#规范目的"><span class="toc-text">规范目的</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#命名规则"><span class="toc-text">命名规则</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#项目命名"><span class="toc-text">项目命名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#目录命名"><span class="toc-text">目录命名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#其他文件命名"><span class="toc-text">其他文件命名</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#HTML"><span class="toc-text">HTML</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#CSS"><span class="toc-text">CSS</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#文件规范"><span class="toc-text">文件规范</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#书写规范"><span class="toc-text">书写规范</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#代码性能优化"><span class="toc-text">代码性能优化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#字体规则"><span class="toc-text">字体规则</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#其他规范"><span class="toc-text">其他规范</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CSS3属性支持度"><span class="toc-text">CSS3属性支持度</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#常用的CSS命名规则"><span class="toc-text">常用的CSS命名规则</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#JS"><span class="toc-text">JS</span></a></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/10/19/面试题总结/">面试题总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/25/小程序问题总结/">小程序问题总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/02/本地打印问题/">本地打印问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/22/前端规范/">前端规范</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/04/如何展示github中的demo/">如何展示github中的demo</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/03/git提交项目至github/">git提交项目至github</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/22/H5项目常见问题汇总及解决方案/">H5项目常见问题汇总及解决方案</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/20/写前端页面时的注意事项/">写前端页面时的注意事项</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/15/开发过程中遇到的小问题/">开发过程中遇到的小问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/15/兼容IE8需要考虑到的问题/">兼容IE8需要考虑到的问题</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/打印/" style="font-size: 15px;">打印</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li></ul></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">网站地图</a> |  <a href="/atom.xml">订阅</a> |  <a href="/about/">关于</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次</p><p><span> Copyright &copy;<a href="/." rel="nofollow">秋天的枫叶.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.1" async></script><script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":["mshare","weixin","tsina","qzone","linkedin","fbook","twi","print","renren","sqq","evernotecn","bdysc","tqq","tqf","bdxc","kaixin001","tieba","douban","bdhome","thx","ibaidu","meilishuo","mogujie","diandian","huaban","duitang","hx","fx","youdao","sdo","qingbiji","people","xinhua","mail","isohu","yaolan","wealink","ty","iguba","h163","copy"],"bdPic":"","bdStyle":"1","bdSize":"16"},"share":{},"image":{"viewList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"]}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script><script src="http://v2.uyan.cc/code/uyan.js?uid=2138441"></script><script>var cloudTieConfig = {
  url: document.location.href, 
  sourceId: "",
  productKey: '83de9c144d5f4bfdb4800daa776d2f40',
  target: "cloud-tie-wrapper"
};</script><script src="https://img1.ws.126.net/f2e/tie/yun/sdk/loader.js"></script></body></html>